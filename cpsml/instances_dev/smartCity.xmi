<?xml version="1.0" encoding="UTF-8"?>
<cpsml:CPS xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:cpsml="http://big.tuwien.ac.at/cpsml"
    xsi:schemaLocation="http://big.tuwien.ac.at/cpsml ../model/cpsml.ecore">
  <environment
      name="UrbanDistrict">
    <node name="Weatherstation">
      <publication
          messageBroker="//@messageBroker.0">
        <topics>weather</topics>
      </publication>
      <connectionModule
          xsi:type="cpsml:WiredModule"
          name="WEATHERSTATION_w"
          connect="//@messageBroker.0/@connectionModule.1">
        <supportedProtocols>DDS</supportedProtocols>
      </connectionModule>
      <position
          x="5.0"
          y="2.0"/>
      <component
          xsi:type="cpsml:Sensor"
          name="Temperature"
          topic="weather"
          frequency="0.02"/>
      <component
          xsi:type="cpsml:Sensor"
          name="Precipitation"
          topic="weather"
          frequency="0.02"/>
      <component
          xsi:type="cpsml:Sensor"
          name="Windspeed"
          topic="weather"
          frequency="1.0"/>
    </node>
    <node name="WaterSprinkler">
      <connectionModule
          xsi:type="cpsml:WirelessModule"
          name="WATERSPRINKLER">
        <supportedProtocols>MQTT</supportedProtocols>
        <supportedProtocols>SMQTT</supportedProtocols>
      </connectionModule>
      <position/>
      <component
          xsi:type="cpsml:Actuator"
          name="WaterPump"
          topic=""
          runs="10"
          ratedRuns="1000"/>
    </node>
  </environment>
  <environment
      name="RuralDistrict">
    <node name="WindMill">
      <position
          x="17.0"
          y="3.0"
          z="5.0"/>
      <component
          xsi:type="cpsml:Actuator"
          name="Generator"
          topic="energy"
          runs="999"
          ratedRuns="10000"/>
    </node>
  </environment>
  <environment
      name="IndustrialDistrict">
    <node name="AirQualityStation">
      <connectionModule
          xsi:type="cpsml:WirelessModule"
          name="AIRQUALITYSTATION">
        <supportedProtocols>MQTT</supportedProtocols>
      </connectionModule>
      <position
          x="18.0"
          y="2.0"/>
      <component
          xsi:type="cpsml:Sensor"
          name="pollution"
          topic="pollution"
          frequency="0.02"/>
    </node>
    <node name="PowerPlant">
      <subscription
          messageBroker="//@messageBroker.1">
        <topics>energy</topics>
      </subscription>
      <connectionModule
          xsi:type="cpsml:WiredModule"
          name="POWERPLANT_w"
          connect="//@messageBroker.1/@connectionModule.0">
        <supportedProtocols>SMQTT</supportedProtocols>
      </connectionModule>
      <position
          x="18.0"
          y="18.0"
          z="-1.0"/>
      <component
          xsi:type="cpsml:Actuator"
          name="Generator"
          topic="energy"
          runs="10"
          ratedRuns="5000"/>
    </node>
  </environment>
  <messageBroker
      name="North">
    <connectionModule
        xsi:type="cpsml:WirelessModule"
        name="NORTH_MB_wl">
      <supportedProtocols>DDS</supportedProtocols>
    </connectionModule>
    <connectionModule
        xsi:type="cpsml:WiredModule"
        name="NORTH_MB_w"
        connectOpposite="//@environment.0/@node.0/@connectionModule.0">
      <supportedProtocols>DDS</supportedProtocols>
    </connectionModule>
    <position
        x="10.0"
        y="10.0"/>
    <topics>weather</topics>
  </messageBroker>
  <messageBroker
      name="South">
    <connectionModule
        xsi:type="cpsml:WiredModule"
        name="SOUTH"
        connectOpposite="//@environment.2/@node.1/@connectionModule.0">
      <supportedProtocols>DDS</supportedProtocols>
      <supportedProtocols>MQTT</supportedProtocols>
      <supportedProtocols>SMQTT</supportedProtocols>
    </connectionModule>
    <position
        x="8.0"
        y="14.0"
        z="1.0"/>
    <topics>energy</topics>
  </messageBroker>
  <controller>
    <subscription
        messageBroker="//@messageBroker.0">
      <topics>weather</topics>
    </subscription>
    <publication
        messageBroker="//@messageBroker.0"/>
  </controller>
</cpsml:CPS>
